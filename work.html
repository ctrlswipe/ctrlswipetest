<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Our Work | Portfolio</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.6.6/css/flag-icons.min.css"/>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Montserrat', 'sans-serif'], display: ['Montserrat', 'sans-serif'] },
                    colors: { 'cmyk-c': '#00AEEF', 'cmyk-m': '#EC008C', 'cmyk-y': '#FFF200', 'cmyk-k': '#101010', 'cmyk-m-light': '#ff4da6' },
                    boxShadow: { 'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.15)' }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        html, body { overflow-x: hidden; width: 100%; position: relative; -webkit-tap-highlight-color: transparent; }
        .glass-panel { background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.8); }
        .gradient-blob-magenta { position: absolute; width: 600px; height: 600px; background: radial-gradient(circle, #EC008C 0%, transparent 70%); opacity: 0.15; filter: blur(150px); z-index: 0; pointer-events: none; }
        .gradient-blob-cyan { position: absolute; width: 600px; height: 600px; background: radial-gradient(circle, #00AEEF 0%, transparent 70%); opacity: 0.15; filter: blur(150px); z-index: 0; pointer-events: none; }

        /* CAROUSEL STYLES - OPTIMIZED (NO BLUR) */
        .carousel-container { perspective: 1000px; overflow: hidden; display: flex; justify-content: center; align-items: center; position: relative; height: 750px; }
        
        .carousel-item { 
            position: absolute; 
            transition: all 0.4s ease-out; /* Slightly faster transition */
            box-shadow: 0 10px 30px rgba(0,0,0,0.15); 
            overflow: hidden;
            background: black; 
            transform-style: preserve-3d;
            will-change: transform, opacity; 
            /* Removed backdrop-filter to reduce lag */
        }
        
        .c-active { 
            z-index: 20; 
            transform: translateX(0) scale(1); 
            opacity: 1; 
            filter: brightness(1); /* Reset brightness */
        }
        .c-prev { 
            z-index: 10; 
            transform: translateX(-100%) scale(0.85) rotateY(15deg); 
            opacity: 0.8; 
            /* Removed blur, kept brightness for depth */
            filter: brightness(0.6); 
            pointer-events: none; 
        }
        .c-next { 
            z-index: 10; 
            transform: translateX(100%) scale(0.85) rotateY(-15deg); 
            opacity: 0.8; 
            /* Removed blur, kept brightness for depth */
            filter: brightness(0.6); 
            pointer-events: none; 
        }
        .c-hidden { z-index: 0; transform: scale(0.5); opacity: 0; pointer-events: none; display: none; }

        /* Mobile Scroll */
        .mobile-scroll { 
            display: flex; 
            overflow-x: auto; 
            gap: 1rem; 
            padding: 1rem 2rem; 
            scroll-snap-type: x mandatory; 
            -webkit-overflow-scrolling: touch; 
            scroll-behavior: smooth; 
        }
        .mobile-scroll::-webkit-scrollbar { display: none; }
        .mobile-item { 
            flex: 0 0 85%; 
            scroll-snap-align: center; 
            overflow: hidden; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.15); 
            position: relative;
            background: black;
        }

        /* --- CURSOR STYLES --- */
        @media (min-width: 1024px) {
            body { cursor: none; }
            .cursor-dot { 
                width: 24px; height: 24px; 
                background-color: white; 
                position: fixed; top: 0; left: 0;
                transform: translate(-50%, -50%); 
                z-index: 100001; 
                pointer-events: none; 
                mix-blend-mode: difference; 
                -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='black'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E"); 
                mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='black'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E"); 
                -webkit-mask-size: contain; mask-size: contain; 
                -webkit-mask-repeat: no-repeat; mask-repeat: no-repeat; 
                -webkit-mask-position: center; mask-position: center; 
                transition: transform 0.1s; 
            }
            .cursor-dot.active { 
                background-color: #ff0033; mix-blend-mode: normal; 
                box-shadow: 0 0 15px #ff0033, 0 0 30px #ff0033; 
                transform: translate(-50%, -50%) scale(0.8); 
            }
            .cursor-ring { 
                width: 40px; height: 40px; 
                border: 1px solid #EC008C; 
                border-radius: 50%; 
                position: fixed; top: 0; left: 0;
                transform: translate(-50%, -50%); 
                z-index: 100000; 
                pointer-events: none; 
                transition: all 0.15s ease-out; 
            }
            .cursor-ring.hovered { width: 60px; height: 60px; background: rgba(255, 255, 255, 0.1); }
        }
        @media (max-width: 1023px) { 
            .cursor-dot, .cursor-ring { display: none !important; } 
            body { cursor: auto; } 
        }

        .flag-btn { perspective: 1000px; display: inline-block; cursor: pointer; }
        .flag-inner { transition: transform 0.6s; transform-style: preserve-3d; display: inline-block; }
        .flag-flip { animation: flipShine 0.8s cubic-bezier(0.455, 0.030, 0.515, 0.955) both; }
        @keyframes flipShine { 0% { transform: rotateY(0); filter: brightness(1); } 50% { filter: brightness(2) drop-shadow(0 0 10px gold); } 100% { transform: rotateY(360deg); filter: brightness(1); } }
        
        #mobile-menu { transition: opacity 0.4s ease-in-out, visibility 0.4s; }
        #mobile-menu.open { opacity: 1; visibility: visible; }
        #mobile-menu.closed { opacity: 0; visibility: hidden; }
        
        .aspect-4-5 { aspect-ratio: 4/5; }
        .aspect-9-16 { aspect-ratio: 9/16; }
        .aspect-16-9 { aspect-ratio: 16/9; }
        
        /* YouTube Embed Styling */
        .yt-story-wrapper, .yt-video-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        .yt-story-wrapper iframe {
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .yt-video-wrapper iframe {
            width: 100%;
            height: 100%;
            pointer-events: auto;
        }
        .yt-story-overlay {
            position: absolute;
            inset: 0;
            z-index: 10;
            background: transparent;
        }
        
        /* Utility for hover effect removal */
        .hoverable { transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important; display: inline-block; }
        .hoverable:hover { transform: scale(1.05) !important; z-index: 50; position: relative; }
    </style>
</head>
<body class="bg-gray-50 text-cmyk-k font-sans selection:bg-cmyk-m selection:text-white">
    <div class="cursor-dot" id="cursor-dot"></div>
    <div class="cursor-ring" id="cursor-ring"></div>

    <nav class="fixed w-full z-50 top-4 px-4">
        <div class="glass-panel rounded-full max-w-7xl mx-auto px-6 md:px-8 py-3 md:py-4 flex justify-between items-center shadow-glass relative z-50">
            <div class="w-32 md:w-48 h-10 md:h-12 relative flex items-center justify-start z-50">
                <a href="index.html" class="absolute left-0 top-0 w-1/2 h-full z-50 cursor-pointer"></a>
                <div class="w-full h-full origin-left pointer-events-none">
                     <img src="logo.svg" alt="CTRL Swipe Logo" class="h-full w-auto object-contain">
                </div>
            </div>

            <div class="hidden lg:flex space-x-8 font-bold text-sm tracking-wide items-center">
                <a href="index.html" class="text-cmyk-k hover:text-cmyk-m-light transition-colors hoverable" data-key="nav-home">HOME</a>
                <a href="about.html" class="text-cmyk-k hover:text-cmyk-m-light transition-colors hoverable" data-key="nav-about">ABOUT US</a>
                <a href="work.html" class="text-cmyk-m transition-colors hoverable" data-key="nav-work">OUR WORK</a>
                <a href="blog.html" class="text-cmyk-k hover:text-cmyk-m-light transition-colors hoverable" data-key="nav-blog">BLOG</a>
                <a href="contact.html" class="text-cmyk-k hover:text-cmyk-m-light transition-colors hoverable" data-key="nav-contact">CONTACT</a>
                <div class="flag-btn hoverable ml-4" onclick="toggleLanguage()">
                    <span id="flag-icon" class="flag-inner fi fi-us text-xl rounded-sm shadow-sm"></span>
                </div>
            </div>

            <div class="lg:hidden flex items-center gap-4 z-[60]">
                <div class="flag-btn" onclick="toggleLanguage()">
                    <span id="flag-icon-mobile" class="flag-inner fi fi-us text-xl rounded-sm shadow-sm"></span>
                </div>
                <button id="burger-btn" class="w-10 h-10 flex-shrink-0 flex items-center justify-center text-black bg-white rounded-full shadow-lg border border-gray-100 focus:outline-none">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
    </nav>

    <div id="mobile-menu" class="fixed inset-0 z-40 closed bg-white/80 backdrop-blur-xl lg:hidden flex flex-col items-center justify-center">
        <div class="flex flex-col space-y-8 text-center font-display font-black text-3xl text-black">
            <a href="index.html" class="text-black hover:text-cmyk-m-light" data-key="nav-home">HOME</a>
            <a href="about.html" class="text-black hover:text-cmyk-m-light" data-key="nav-about">ABOUT US</a>
            <a href="work.html" class="text-cmyk-m" data-key="nav-work">OUR WORK</a>
            <a href="blog.html" class="text-black hover:text-cmyk-m-light" data-key="nav-blog">BLOG</a>
            <a href="contact.html" class="text-black hover:text-cmyk-m-light" data-key="nav-contact">CONTACT</a>
        </div>
    </div>

    <main class="pt-40 pb-24 px-4 md:px-6 relative min-h-screen overflow-hidden">
         <div class="gradient-blob-magenta" style="top: 10%; left: -200px;"></div>
         <div class="gradient-blob-cyan" style="bottom: 20%; right: -200px;"></div>
         
        <!-- Spacing Reduced: space-y-32 -> space-y-16 md:space-y-24 -->
        <div class="max-w-7xl mx-auto relative z-10 space-y-16 md:space-y-24">
            
            <!-- HEADER -->
            <header class="text-center max-w-4xl mx-auto">
                <!-- Title adjusted for mobile: text-4xl -> text-6xl -->
                <h1 class="text-5xl md:text-8xl font-display font-black mb-6 leading-tight break-words" id="work-title">
                    <span class="text-cmyk-k">OUR</span> <span class="text-cmyk-c">WORK</span>
                </h1>
                <p class="text-xl text-gray-600 mb-12 font-regular" data-key="work-desc">
                    Explore our portfolio across various formats.
                </p>
            </header>

            <!-- SECTION 1: SOCIAL MEDIA POSTS (4:5) -->
            <section id="graphics">
                <div class="flex items-center gap-4 mb-8">
                    <div class="h-[3px] bg-cmyk-c flex-grow"></div>
                    <!-- Title scalable: text-2xl on mobile -->
                    <h2 class="text-2xl md:text-5xl font-black text-center uppercase" data-key="sec-graphics">SOCIAL MEDIA POSTS</h2>
                    <div class="h-[3px] bg-cmyk-c flex-grow"></div>
                </div>

                <!-- Desktop Carousel (Graphics) -->
                <div class="hidden lg:flex relative carousel-container h-[700px]" id="carousel-graphics">
                    <button class="absolute left-10 z-30 bg-white/80 hover:bg-white p-4 rounded-full shadow-lg text-cmyk-m transition-colors cursor-pointer" onclick="moveCarousel('graphics', -1)">
                        <i class="fa-solid fa-chevron-left text-2xl"></i>
                    </button>
                    <div class="carousel-track relative w-full h-full flex justify-center items-center" id="track-graphics">
                        <!-- Items injected by JS -->
                    </div>
                    <button class="absolute right-10 z-30 bg-white/80 hover:bg-white p-4 rounded-full shadow-lg text-cmyk-m transition-colors cursor-pointer" onclick="moveCarousel('graphics', 1)">
                        <i class="fa-solid fa-chevron-right text-2xl"></i>
                    </button>
                </div>
                
                <!-- Mobile Scroll (Graphics) -->
                <div class="lg:hidden mobile-scroll" id="mobile-graphics">
                    <!-- Items injected by JS -->
                </div>
            </section>

            <!-- SECTION 2: STORIES (9:16) -->
            <section id="stories">
                <div class="flex items-center gap-4 mb-8">
                    <div class="h-[3px] bg-cmyk-m flex-grow"></div>
                    <h2 class="text-2xl md:text-5xl font-black text-center uppercase" data-key="sec-stories">STORIES</h2>
                    <div class="h-[3px] bg-cmyk-m flex-grow"></div>
                </div>

                <!-- Desktop Carousel (Stories) -->
                <div class="hidden lg:flex relative carousel-container h-[800px]" id="carousel-stories">
                    
                    <!-- Gradient Layers (Only for Stories) -->
                    <div class="absolute left-0 top-0 bottom-0 w-32 z-20 bg-gradient-to-r from-gray-50 to-transparent pointer-events-none"></div>
                    <div class="absolute right-0 top-0 bottom-0 w-32 z-20 bg-gradient-to-l from-gray-50 to-transparent pointer-events-none"></div>

                    <button class="absolute left-10 z-30 bg-white/80 hover:bg-white p-4 rounded-full shadow-lg text-cmyk-m transition-colors cursor-pointer" onclick="moveCarousel('stories', -1)">
                        <i class="fa-solid fa-chevron-left text-2xl"></i>
                    </button>
                    
                    <div class="carousel-track relative w-full h-full flex justify-center items-center" id="track-stories">
                        <!-- Items injected by JS -->
                    </div>
                    
                    <button class="absolute right-10 z-30 bg-white/80 hover:bg-white p-4 rounded-full shadow-lg text-cmyk-m transition-colors cursor-pointer" onclick="moveCarousel('stories', 1)">
                        <i class="fa-solid fa-chevron-right text-2xl"></i>
                    </button>
                </div>

                <!-- Mobile Scroll (Stories) -->
                <div class="lg:hidden mobile-scroll" id="mobile-stories">
                    <!-- Items injected by JS -->
                </div>
            </section>

            <!-- SECTION 3: VIDEO PRODUCTION (9:16 Vertical) -->
            <section id="video">
                <div class="flex items-center gap-4 mb-8">
                    <div class="h-[3px] bg-cmyk-y flex-grow"></div>
                    <h2 class="text-2xl md:text-5xl font-black text-center uppercase" data-key="sec-video">VIDEO PRODUCTION</h2>
                    <div class="h-[3px] bg-cmyk-y flex-grow"></div>
                </div>

                <!-- Desktop Carousel (Video) -->
                <div class="hidden lg:flex relative carousel-container h-[800px]" id="carousel-video">
                    <!-- Note: No gradient layers here as requested -->
                    <button class="absolute left-10 z-30 bg-white/80 hover:bg-white p-4 rounded-full shadow-lg text-cmyk-m transition-colors cursor-pointer" onclick="moveCarousel('video', -1)">
                        <i class="fa-solid fa-chevron-left text-2xl"></i>
                    </button>
                    <div class="carousel-track relative w-full h-full flex justify-center items-center" id="track-video">
                        <!-- Items injected by JS -->
                    </div>
                    <button class="absolute right-10 z-30 bg-white/80 hover:bg-white p-4 rounded-full shadow-lg text-cmyk-m transition-colors cursor-pointer" onclick="moveCarousel('video', 1)">
                        <i class="fa-solid fa-chevron-right text-2xl"></i>
                    </button>
                </div>

                 <!-- Mobile Scroll (Video) -->
                 <div class="lg:hidden mobile-scroll" id="mobile-video">
                    <!-- Items injected by JS -->
                </div>
            </section>

            <!-- SECTION 4: WEB DESIGN -->
            <section id="webdesign">
                <div class="flex items-center gap-4 mb-8">
                    <div class="h-[3px] bg-cmyk-k flex-grow"></div>
                    <h2 class="text-2xl md:text-5xl font-black text-center uppercase" data-key="sec-web">WEB DESIGN</h2>
                    <div class="h-[3px] bg-cmyk-k flex-grow"></div>
                </div>
                
                <!-- 3 Clickable Thumbnails -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 px-4 md:px-0">
                    <a href="https://ctrlswipe.github.io/antalya/" target="_blank" class="block hoverable hover:scale-[1.02] transition-transform duration-300 shadow-xl group">
                        <div class="w-full aspect-square overflow-hidden bg-gray-100">
                            <!-- Updated to WebP -->
                            <img src="web-design/1.webp" loading="lazy" alt="Website 1" class="w-full h-full object-contain bg-white" onerror="this.src='https://placehold.co/800x800/00AEEF/ffffff?text=Website+1'">
                        </div>
                    </a>
                    <a href="https://ctrlswipe.github.io/clinic/" target="_blank" class="block hoverable hover:scale-[1.02] transition-transform duration-300 shadow-xl group">
                         <div class="w-full aspect-square overflow-hidden bg-gray-100">
                             <!-- Updated to WebP -->
                            <img src="web-design/2.webp" loading="lazy" alt="Website 2" class="w-full h-full object-contain bg-white" onerror="this.src='https://placehold.co/800x800/EC008C/ffffff?text=Website+2'">
                        </div>
                    </a>
                    <a href="https://ctrlswipe.github.io/lodge/" target="_blank" class="block hoverable hover:scale-[1.02] transition-transform duration-300 shadow-xl group">
                         <div class="w-full aspect-square overflow-hidden bg-gray-100">
                             <!-- Updated to WebP -->
                            <img src="web-design/3.webp" loading="lazy" alt="Website 3" class="w-full h-full object-contain bg-white" onerror="this.src='https://placehold.co/800x800/FFF200/000000?text=Website+3'">
                        </div>
                    </a>
                </div>
            </section>

            <!-- SECTION 5: CAPTIONS & ADS -->
            <section id="captions" class="pb-12">
                 <div class="flex items-center gap-4 mb-8">
                    <div class="h-[3px] bg-cmyk-c flex-grow"></div>
                    <h2 class="text-2xl md:text-5xl font-black text-center uppercase" data-key="sec4-title">CAPTIONS & ADS</h2>
                    <div class="h-[3px] bg-cmyk-c flex-grow"></div>
                </div>
                 <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto font-medium" data-key="sec4-desc">We write words that sell, convince, and connect.</p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="glass-panel p-8 border-2 border-black shadow-[8px_8px_0px_0px_#00AEEF] hoverable bg-white/80 transform transition-all hover:scale-105">
                        <div class="text-4xl mb-4 text-cmyk-c"><i class="fa-solid fa-bullhorn"></i></div>
                        <p class="text-2xl font-bold mb-2" data-key="box1-title">Ad Copy</p>
                        <p class="text-gray-600 text-sm" data-key="box1-desc">We know how to write ads that appeal to the public, creating hooks that stop the scroll and CTAs that convert.</p>
                    </div>
                    <div class="glass-panel p-8 border-2 border-black shadow-[8px_8px_0px_0px_#00AEEF] hoverable bg-white/80 transform transition-all hover:scale-105">
                        <div class="text-4xl mb-4 text-cmyk-c"><i class="fa-solid fa-quote-right"></i></div>
                        <p class="text-2xl font-bold mb-2" data-key="box2-title">Engaging Captions</p>
                        <p class="text-gray-600 text-sm" data-key="box2-desc">From witty one-liners to storytelling long-form posts, we find the voice that fits your brand perfectly.</p>
                    </div>
                    <div class="glass-panel p-8 border-2 border-black shadow-[8px_8px_0px_0px_#00AEEF] hoverable bg-white/80 transform transition-all hover:scale-105">
                        <div class="text-4xl mb-4 text-cmyk-c"><i class="fa-solid fa-video"></i></div>
                        <p class="text-2xl font-bold mb-2" data-key="box3-title">Video Scripts</p>
                        <p class="text-gray-600 text-sm" data-key="box3-desc">Structuring your reels and TikToks for maximum retention, ensuring your message is heard.</p>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <footer class="bg-white py-8 text-center border-t-4 border-black">
        <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="font-sans font-medium text-sm text-gray-500">
                <span class="font-bold">CTRL <span class="italic">Swipe</span></span> <span data-key="footer-rights">© 2025. All rights reserved.</span>
            </div>
            <div class="font-sans font-medium text-sm text-gray-500 max-w-md text-right" data-key="footer-crafted">
                Agency in <span class="font-bold text-black">Baia Mare</span>. Serving <span class="text-black">Cluj, Suceava</span> & Worldwide.
            </div>
        </div>
    </footer>
    
    <script>
        // CONFIG - Updated to WebP and Added Video Config
        const config = {
            graphics: { count: 7, path: 'graphics-portfolio/', ext: '.webp', type: 'image' },
            video: { count: 8, path: 'videos/', ext: '.mp4', type: 'video' }
        };

        // Custom config for Stories: ONLY 5 LOCAL IMAGES (WebP)
        const storyItems = [
            { type: 'local', src: 'story/1.webp' },
            { type: 'local', src: 'story/2.webp' },
            { type: 'local', src: 'story/3.webp' },
            { type: 'local', src: 'story/4.webp' },
            { type: 'local', src: 'story/5.webp' }
        ];

        // State tracking
        const state = {
            graphics: 0,
            stories: 0,
            video: 0
        };

        // GENERATE CONTENT
        function generateItems() {
            // 1. Graphics
            const trackGraphics = document.getElementById('track-graphics');
            const mobileGraphics = document.getElementById('mobile-graphics');
            for(let i=1; i<=config.graphics.count; i++) {
                const src = `${config.graphics.path}${i}${config.graphics.ext}`;
                const fallback = `https://placehold.co/800x1000/00AEEF/ffffff?text=Graphic+${i}`;
                
                trackGraphics.innerHTML += `
                    <div class="carousel-item aspect-4-5 w-[320px] md:w-[450px]" data-index="${i-1}">
                        <img src="${src}" loading="lazy" class="w-full h-full object-contain" onerror="this.src='${fallback}'">
                    </div>`;
                
                mobileGraphics.innerHTML += `
                    <div class="mobile-item aspect-4-5">
                         <img src="${src}" loading="lazy" class="w-full h-full object-contain" onerror="this.src='${fallback}'">
                    </div>`;
            }

            // 2. Stories (Custom Mix - Now Images Only)
            const trackStories = document.getElementById('track-stories');
            const mobileStories = document.getElementById('mobile-stories');
            
            storyItems.forEach((item, index) => {
                let content = '';
                const fallback = `https://placehold.co/450x800/EC008C/ffffff?text=Story+${index+1}`;
                content = `<img src="${item.src}" loading="lazy" class="w-full h-full object-contain" onerror="this.src='${fallback}'">`;

                trackStories.innerHTML += `
                    <div class="carousel-item aspect-9-16 w-[320px] md:w-[360px]" data-index="${index}">
                        ${content}
                    </div>`;
                
                mobileStories.innerHTML += `
                    <div class="mobile-item aspect-9-16">
                         ${content}
                    </div>`;
            });

            // 3. Video Production (LOCAL .mp4 with Controls)
            const trackVideo = document.getElementById('track-video');
            const mobileVideo = document.getElementById('mobile-video');
            
            for(let i=1; i<=config.video.count; i++) {
                const src = `${config.video.path}${i}${config.video.ext}`;
                const fallback = `https://placehold.co/450x800/FFF200/000000?text=Video+${i}`;
                
                // Video tag with controls, playsinline, and no autoplay on load (user controls it, or scroll triggers it)
                const content = `
                    <div class="w-full h-full bg-black">
                         <video src="${src}" class="w-full h-full object-cover" controls playsinline preload="metadata" poster="${fallback}"></video>
                    </div>
                `;

                trackVideo.innerHTML += `
                    <div class="carousel-item aspect-9-16 w-[320px] md:w-[360px]" data-index="${i-1}">
                        ${content}
                    </div>`;
                
                mobileVideo.innerHTML += `
                    <div class="mobile-item aspect-9-16">
                         ${content}
                    </div>`;
            }

            updateCarousel('graphics');
            updateCarousel('stories');
            updateCarousel('video');
            initMobileObserver();
        }

        function moveCarousel(type, dir) {
            let total = 0;
            if (type === 'graphics') total = config.graphics.count;
            else if (type === 'stories') total = storyItems.length;
            else total = config.video.count; // Use local config count for videos

            state[type] = (state[type] + dir + total) % total;
            updateCarousel(type);
        }

        function updateCarousel(type) {
            const track = document.getElementById(`track-${type}`);
            const items = track.querySelectorAll('.carousel-item');
            const activeIdx = state[type];
            const total = items.length;

            items.forEach((item, idx) => {
                let diff = (idx - activeIdx + total) % total;
                if (diff > total / 2) diff -= total;
                
                item.className = item.className.replace(/c-active|c-prev|c-next|c-hidden/g, '').trim();
                const video = item.querySelector('video');
                
                if (idx === activeIdx) {
                    item.classList.add('c-active');
                    if (video) {
                        // Attempt auto-play when active in carousel, but respect controls
                        var playPromise = video.play();
                        if (playPromise !== undefined) {
                            playPromise.catch(error => {
                                // Auto-play prevented (normal browsers behavior), user will use controls
                                console.log("Auto-play prevented (Desktop):", error);
                            });
                        }
                    }
                } else {
                    if(video) {
                        video.pause(); 
                        video.currentTime = 0;
                    }
                    if (diff === -1) item.classList.add('c-prev');
                    else if (diff === 1) item.classList.add('c-next');
                    else item.classList.add('c-hidden');
                }
            });
        }
        
        function initMobileObserver() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const video = entry.target.querySelector('video');
                    if(video) {
                        if (entry.isIntersecting) {
                             // On mobile, autoplay usually requires muted
                             video.muted = true; 
                             var p = video.play();
                             if(p !== undefined) {
                                 p.catch(e => console.log("Mobile scroll play error:", e));
                             }
                        } else {
                            video.pause();
                        }
                    }
                });
            }, { root: null, rootMargin: '0px', threshold: 0.6 });
            
            document.querySelectorAll('.mobile-item').forEach(item => observer.observe(item));
        }

        // --- DOM CONTENT LOADED ---
        document.addEventListener('DOMContentLoaded', () => {
            generateItems();

            // --- PC CURSOR LOGIC ---
            if (window.matchMedia("(min-width: 1024px)").matches) {
                const cursorDot = document.getElementById('cursor-dot');
                const cursorRing = document.getElementById('cursor-ring');
                
                if (cursorDot && cursorRing) {
                    document.addEventListener('mousemove', (e) => { 
                        cursorDot.style.left = e.clientX + 'px'; cursorDot.style.top = e.clientY + 'px'; 
                        cursorRing.style.left = e.clientX + 'px'; cursorRing.style.top = e.clientY + 'px'; 
                    });
                    document.addEventListener('mousedown', () => { cursorDot.classList.add('active'); });
                    document.addEventListener('mouseup', () => { cursorDot.classList.remove('active'); });
                    
                    setInterval(() => {
                        const newHoverables = document.querySelectorAll('.hoverable, .carousel-item, a, button');
                        newHoverables.forEach(el => {
                            if(!el.hasAttribute('data-hover-bound')) {
                                el.addEventListener('mouseenter', () => { cursorDot.classList.add('hovered'); cursorRing.classList.add('hovered'); });
                                el.addEventListener('mouseleave', () => { cursorDot.classList.remove('hovered'); cursorRing.classList.remove('hovered'); });
                                el.setAttribute('data-hover-bound', 'true');
                            }
                        });
                    }, 1000);
                }
            }

            const burgerBtn = document.getElementById('burger-btn'); 
            const mobileMenu = document.getElementById('mobile-menu'); 
            let isMenuOpen = false;
            if(burgerBtn) {
                burgerBtn.addEventListener('click', () => { 
                    isMenuOpen = !isMenuOpen; 
                    const icon = burgerBtn.querySelector('i'); 
                    if (isMenuOpen) { mobileMenu.classList.remove('closed'); mobileMenu.classList.add('open'); icon.classList.remove('fa-bars'); icon.classList.add('fa-times'); } 
                    else { mobileMenu.classList.remove('open'); mobileMenu.classList.add('closed'); icon.classList.remove('fa-times'); icon.classList.add('fa-bars'); } 
                });
            }
            applyLanguage(currentLang);
        });

        // TRANSLATIONS
        const translations = {
            en: {
                'nav-home': 'HOME', 'nav-about': 'ABOUT US', 'nav-work': 'OUR WORK', 'nav-blog': 'BLOG', 'nav-contact': 'CONTACT',
                'work-title-en': '<span class="text-cmyk-k">OUR</span> <span class="text-cmyk-c">WORK</span>',
                'work-title-ro': '<span class="text-cmyk-c">PORTOFOLIU</span>',
                'work-desc': 'Explore our portfolio across various formats.',
                'sec-graphics': 'SOCIAL MEDIA POSTS', 'sec-stories': 'STORIES', 'sec-video': 'VIDEO PRODUCTION', 'sec-web': 'WEB DESIGN',
                'btn-quote': 'GET A QUOTE',
                'sec4-title': 'CAPTIONS <span class="text-cmyk-c">& ADS</span>', 'sec4-desc': 'We write words that sell, convince, and connect.',
                'box1-title': 'Ad Copy', 'box1-desc': 'We know how to write ads that appeal to the public, creating hooks that stop the scroll and CTAs that convert.',
                'box2-title': 'Engaging Captions', 'box2-desc': 'From witty one-liners to storytelling long-form posts, we find the voice that fits your brand perfectly.',
                'box3-title': 'Video Scripts', 'box3-desc': 'Structuring your reels and TikToks for maximum retention, ensuring your message is heard.',
                'footer-rights': '© 2025. All rights reserved.',
                'footer-crafted': 'Agency in <span class="font-bold text-black">Baia Mare</span>. Serving <span class="text-black">Cluj, Suceava</span> & Worldwide.'
            },
            ro: {
                'nav-home': 'ACASĂ', 'nav-about': 'DESPRE NOI', 'nav-work': 'PORTOFOLIU', 'nav-blog': 'BLOG', 'nav-contact': 'CONTACT',
                'work-title-en': '<span class="text-cmyk-k">OUR</span> <span class="text-cmyk-c">WORK</span>', 
                'work-title-ro': '<span class="text-cmyk-c">PORTOFOLIU</span>',
                'work-desc': 'Explorează portofoliul nostru în diverse formate.',
                'sec-graphics': 'POSTĂRI SOCIAL MEDIA', 'sec-stories': 'STORY-URI', 'sec-video': 'PRODUCȚIE VIDEO', 'sec-web': 'DESIGN WEB',
                'btn-quote': 'CERE O OFERTĂ',
                'sec4-title': 'COPYWRITING <span class="text-cmyk-c">& RECLAME</span>', 'sec4-desc': 'Scriem texte care vând, conving și conectează.',
                'box1-title': 'Texte pentru reclame', 'box1-desc': 'Știm cum să scriem reclame care să atragă publicul, creând elemente captivante care să oprească scroll-ul și CTA-uri care să aducă profit.',
                'box2-title': 'Potrivit ție', 'box2-desc': 'De la mesaje scurte și pline de umor până la postări lungi care spun o poveste, găsim tonul care se potrivește perfect brandului tău.',
                'box3-title': 'Scripturi video', 'box3-desc': 'Structurarea reel-urilor și TikTok-urilor pentru o retenție maximă, asigurându-ne că mesajul tău este auzit.',
                'footer-rights': 'Toate drepturile rezervate.',
                'footer-crafted': 'Creat cu ❤️ în Baia Mare, România.'
            }
        };

        let currentLang = localStorage.getItem('siteLang') || 'en';

        function applyLanguage(lang) {
            const icon = document.getElementById('flag-icon');
            const iconMob = document.getElementById('flag-icon-mobile');
            if(icon) icon.className = 'flag-inner fi text-xl rounded-sm shadow-sm ' + (lang === 'ro' ? 'fi-ro' : 'fi-us');
            if(iconMob) iconMob.className = 'flag-inner fi text-xl rounded-sm shadow-sm ' + (lang === 'ro' ? 'fi-ro' : 'fi-us');

            const elements = document.querySelectorAll('[data-key]');
            elements.forEach(el => {
                const key = el.getAttribute('data-key');
                if(translations[lang][key]) el.innerHTML = translations[lang][key];
            });
            
            const titleEl = document.getElementById('work-title');
            if (titleEl) {
                if (lang === 'ro') titleEl.innerHTML = translations['ro']['work-title-ro'];
                else titleEl.innerHTML = translations['en']['work-title-en'];
            }
        }

        function toggleLanguage() {
            const newLang = currentLang === 'en' ? 'ro' : 'en';
            currentLang = newLang;
            localStorage.setItem('siteLang', newLang);
            const icons = document.querySelectorAll('.flag-inner');
            icons.forEach(ic => ic.classList.add('flag-flip'));
            setTimeout(() => { applyLanguage(newLang); }, 400);
            setTimeout(() => { icons.forEach(ic => ic.classList.remove('flag-flip')); }, 800);
        }
    </script>
</body>
</html>